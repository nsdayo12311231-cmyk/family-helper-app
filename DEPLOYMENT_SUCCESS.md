# Family Helper App - ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸè¨˜éŒ²

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
å®¶æ—å‘ã‘ãŠå°é£ã„ãƒ»ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒª

- **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: React + TypeScript + Vite + Supabase + TailwindCSS
- **æœ¬ç•ªURL**: https://family-helper-app.vercel.app
- **GitHubãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/nsdayo12311231-cmyk/family-helper-app
- **Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: mmumebytsbxdzloezjbu

---

## ä¸»è¦ãªå®Ÿè£…å†…å®¹

### 1. Supabaseèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ç§»è¡Œ
- **ç§»è¡Œå‰**: LocalStorageãƒ™ãƒ¼ã‚¹ã®èªè¨¼ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã‚ã‚Šï¼‰
- **ç§»è¡Œå¾Œ**: Supabase Auth + `auth_user_id`ãƒ™ãƒ¼ã‚¹ã®èªè¨¼
- **å®Ÿè£…**: `/src/contexts/NewSupabaseAuthContext.tsx`

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– âš¡ï¸
**èª²é¡Œ**: ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«æ¯å›Supabaseã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¦ã„ãŸ

**è§£æ±ºç­–**: localStorage ã‚­ãƒ£ãƒƒã‚·ãƒ¥ + Stale-While-Revalidate æˆ¦ç•¥
```typescript
// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å³åº§ã«å¾©å…ƒï¼ˆ24æ™‚é–“æœ‰åŠ¹ï¼‰
const cachedData = localStorage.getItem(`family_data_${userId}`);
if (cachedData && age < 24h) {
  // å³åº§ã«è¡¨ç¤º
  dispatch({ type: 'SET_FAMILY_DATA', payload: cachedData });

  // ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  loadFamilyData(userId);
}
```

**çµæœ**: ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ãŒç¬æ™‚ã«å®Œäº†ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸ

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 
- **families ãƒ†ãƒ¼ãƒ–ãƒ«**: `auth_user_id` ã§ Supabase Auth ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ç´ä»˜ã‘
- **members ãƒ†ãƒ¼ãƒ–ãƒ«**: å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±
- **tasks, goals, money_transactions** ãªã©: å„ç¨®æ©Ÿèƒ½ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
- **RLS**: ç„¡åŠ¹åŒ–ï¼ˆå°†æ¥çš„ã«å®Ÿè£…äºˆå®šï¼‰

### 4. ä¸»è¦æ©Ÿèƒ½
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‰
- âœ… å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†ï¼ˆè¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ï¼‰
- âœ… ã‚¿ã‚¹ã‚¯ç®¡ç†
- âœ… ãŠå°é£ã„ç®¡ç†ï¼ˆæ®‹é«˜ãƒ»å–å¼•å±¥æ­´ï¼‰
- âœ… ç›®æ¨™è¨­å®š
- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½
- âœ… çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ

---

## ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### 1. Gitãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ–
```bash
git init
git add .
git commit -m "Initial commit: Family Helper App with Supabase integration"
```

### 2. GitHubãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
1. https://github.com/new ã§ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
2. ãƒªãƒã‚¸ãƒˆãƒªå: `family-helper-app`
3. Publicè¨­å®š

```bash
git remote add origin https://github.com/nsdayo12311231-cmyk/family-helper-app.git
git branch -M main
git push -u origin main
```

### 3. Vercelãƒ‡ãƒ—ãƒ­ã‚¤
1. https://vercel.com/new ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¤ãƒ³ãƒãƒ¼ãƒˆ
2. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ
3. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼š
   - `VITE_SUPABASE_URL`: `https://mmumebytsbxdzloezjbu.supabase.co`
   - `VITE_SUPABASE_ANON_KEY`: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
4. Deploy ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

### 4. ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ
- âœ… ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- âœ… ç’°å¢ƒå¤‰æ•°é©ç”¨
- âœ… æœ¬ç•ªç’°å¢ƒã§æ­£å¸¸å‹•ä½œç¢ºèª

---

## è§£æ±ºã—ãŸä¸»è¦ãªå•é¡Œ

### å•é¡Œ1: ç„¡é™ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
**åŸå› **: å¤ã„RLSãƒãƒªã‚·ãƒ¼ãŒå­˜åœ¨ã—ãªã„ã‚«ãƒ©ãƒ ï¼ˆ`admin_user_id`ï¼‰ã‚’å‚ç…§ã—ã¦ã„ãŸ
**è§£æ±º**: å…¨RLSãƒãƒªã‚·ãƒ¼ã‚’å‰Šé™¤

### å•é¡Œ2: ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—å¾Œã®è‡ªå‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
**åŸå› **: `onAuthStateChange`ãŒã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ä¸­ã«ç™ºç«ã—ã€å­˜åœ¨ã—ãªã„ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã‚ˆã†ã¨ã—ã¦ã„ãŸ
**è§£æ±º**: `isSigningUpRef`ãƒ•ãƒ©ã‚°ã§åˆ¶å¾¡

### å•é¡Œ3: ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ
**åŸå› **: æ¯å›Supabaseã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œ
**è§£æ±º**: localStorageã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…

### å•é¡Œ4: ãƒ¡ãƒ³ãƒãƒ¼è¿½åŠ ã‚¨ãƒ©ãƒ¼
**åŸå› **: AdminPageãŒé–¢æ•°ã«èª¤ã£ãŸå½¢å¼ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦ã„ãŸ
**è§£æ±º**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¸¡ã—ã‹ã‚‰å€‹åˆ¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¸¡ã—ã«å¤‰æ›´

### å•é¡Œ5: Vercelãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®Supabaseã‚¨ãƒ©ãƒ¼
**åŸå› **: ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã‹ã£ãŸ
**è§£æ±º**: Vercelç’°å¢ƒå¤‰æ•°ã«`VITE_SUPABASE_URL`ã¨`VITE_SUPABASE_ANON_KEY`ã‚’è¿½åŠ 

---

## ç’°å¢ƒå¤‰æ•°ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

```env
VITE_SUPABASE_URL=https://mmumebytsbxdzloezjbu.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tdW1lYnl0c2J4ZHpsb2V6amJ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNDc2NzIsImV4cCI6MjA3NDgyMzY3Mn0.H2v7SKC3t5wiq4WHPx-Lzn7KS-p-PTh6zPfgbIbQZwI
```

**æ³¨æ„**: ã“ã‚Œã‚‰ã®å€¤ã¯Supabase Anon Keyã§å…¬é–‹å¯èƒ½ã§ã™ï¼ˆRLSã§ä¿è­·ã•ã‚Œã‚‹æƒ³å®šï¼‰

---

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
family-helper-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ NewSupabaseAuthContext.tsx  # èªè¨¼ãƒ»å®¶æ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ AuthPage.tsx                # ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—
â”‚   â”‚   â”œâ”€â”€ MainApp.tsx                 # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª
â”‚   â”‚   â””â”€â”€ app/
â”‚   â”‚       â”œâ”€â”€ AdminPage.tsx           # ç®¡ç†è€…ãƒšãƒ¼ã‚¸
â”‚   â”‚       â”œâ”€â”€ CalendarPage.tsx        # ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
â”‚   â”‚       â”œâ”€â”€ CompletePage.tsx        # ã‚¿ã‚¹ã‚¯å®Œäº†
â”‚   â”‚       â”œâ”€â”€ GoalsPage.tsx           # ç›®æ¨™è¨­å®š
â”‚   â”‚       â”œâ”€â”€ MoneyPage.tsx           # ãŠå°é£ã„ç®¡ç†
â”‚   â”‚       â””â”€â”€ StatsPage.tsx           # çµ±è¨ˆ
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ supabase.ts                 # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â””â”€â”€ types/
â”‚       â”œâ”€â”€ index.ts                    # å‹å®šç¾©
â”‚       â””â”€â”€ database.ts                 # Supabaseå‹å®šç¾©
â”œâ”€â”€ .env                                # ç’°å¢ƒå¤‰æ•°ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
â”œâ”€â”€ vercel.json                         # Vercelè¨­å®š
â””â”€â”€ vite.config.ts                      # Viteè¨­å®š
```

---

## ä»Šå¾Œã®æ”¹å–„æ¡ˆ

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- [ ] RLSï¼ˆRow Level Securityï¼‰ã‚’æœ‰åŠ¹åŒ–
- [ ] å„ãƒ†ãƒ¼ãƒ–ãƒ«ã«é©åˆ‡ãªRLSãƒãƒªã‚·ãƒ¼ã‚’è¨­å®š
- [ ] auth_user_id ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- [ ] ç”»åƒã®æœ€é©åŒ–
- [ ] ã‚³ãƒ¼ãƒ‰åˆ†å‰²ï¼ˆReact.lazyï¼‰
- [ ] Service Worker ã§ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ

### æ©Ÿèƒ½è¿½åŠ 
- [ ] ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- [ ] ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
- [ ] ãƒ¬ãƒãƒ¼ãƒˆã®PDFã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- [ ] å¤šè¨€èªå¯¾å¿œ

### UI/UX
- [ ] ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
- [ ] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ”¹å–„
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æœ€é©åŒ–

---

## ãƒ‡ãƒ—ãƒ­ã‚¤æ—¥æ™‚
2025å¹´10æœˆ1æ—¥ 18:45

## ä½œæˆè€…
Claude Code (AI Assistant) + nakamursuguru

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒçµ‚ã‚ã‚‰ãªã„å ´åˆ
1. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
2. Supabaseæ¥ç¶šã‚’ç¢ºèªï¼ˆç’°å¢ƒå¤‰æ•°ï¼‰
3. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ï¼ˆlocalStorageå‰Šé™¤ï¼‰

### ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„å ´åˆ
1. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç¢ºèª
2. å®¶æ—ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãç´ä»˜ã„ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆ`auth_user_id`ï¼‰
3. ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç¢ºèªæ¸ˆã¿ã‹ç¢ºèª

### ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆ
1. ãƒ–ãƒ©ã‚¦ã‚¶ã®DevToolsã§ Network ã‚¿ãƒ–ã‚’ç¢ºèª
2. Supabaseã‚¯ã‚¨ãƒªãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã„ãªã„ã‹ç¢ºèª
3. RLSãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ãªã„ã‹ç¢ºèªï¼ˆç¾åœ¨ã¯ç„¡åŠ¹ã®ã¯ãšï¼‰

---

ğŸ‰ **ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸï¼æœ¬ç•ªç’°å¢ƒã§æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™**
